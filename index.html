<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>HEX: Anthill Inside</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=IM+Fell+English+SC&family=Special+Elite&display=swap');

        :root {
            --bg-color: #110f13;
            --term-color: #1a181e;
            --text-color: #d8d8c0;
            --accent-color: #ff9900; /* Octarine (imagined) or Gold */
            --highlight-color: #aaddff; /* Magic glow */
            --danger-color: #ff5555;
            --font-main: 'IM Fell English SC', serif; /* Wizardly */
            --font-code: 'Special Elite', monospace; /* Typewriter */
        }

        * { box-sizing: border-box; }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-code);
            font-size: 1.15rem;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
            background-image: url('data:image/svg+xml;utf8,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><circle cx="50" cy="50" r="1" fill="%23333"/></svg>'); 
        }

        /* Thaumaturgical Glow */
        body::before {
            content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: radial-gradient(circle at center, transparent 0%, #000 100%);
            pointer-events: none; z-index: 5;
        }

        #hud {
            background-color: var(--term-color);
            border-bottom: 4px double #444;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            font-family: var(--font-main);
            font-size: 1.2rem;
            z-index: 10;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .stat { color: var(--highlight-color); text-shadow: 0 0 5px var(--highlight-color); }
        .stat-label { color: #888; font-size: 0.8em; }

        #terminal {
            flex-grow: 1;
            padding: 30px;
            overflow-y: auto;
            background-color: #161419;
            z-index: 1;
            font-family: var(--font-code);
        }

        /* Typewriter Paper Effect */
        .log-entry {
            margin-bottom: 15px;
            padding: 10px;
            border-left: 2px solid #333;
            animation: typeIn 0.3s ease-out;
        }
        @keyframes typeIn { from { opacity: 0; transform: translateX(-5px); } to { opacity: 1; transform: translateX(0); } }

        .hex-output {
            color: var(--accent-color);
            font-weight: bold;
            font-family: 'Courier New', monospace;
            border: 1px dashed var(--accent-color);
            padding: 10px;
            background: rgba(255, 153, 0, 0.05);
            text-transform: uppercase;
        }

        .narrator { color: #ccc; }
        .wizard { color: #aaddff; font-family: var(--font-main); }
        .danger { color: #ff7777; }

        #controls {
            background-color: var(--term-color);
            border-top: 4px double #444;
            padding: 20px;
            z-index: 10;
        }

        #quick-actions {
            display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px;
            margin-bottom: 15px;
        }

        button {
            background: #222; color: #ddd; border: 1px solid #555;
            padding: 12px; font-family: var(--font-main); font-size: 1rem;
            cursor: pointer; transition: all 0.1s;
            box-shadow: 2px 2px 0 #000;
        }
        button:active { transform: translate(2px, 2px); box-shadow: none; }
        button:hover { background: #333; border-color: var(--highlight-color); }

        .btn-magic { border-color: var(--accent-color); color: var(--accent-color); }

        #input-line { display: flex; gap: 10px; }
        input {
            flex-grow: 1; background: #000; border: 1px solid #444; color: var(--accent-color);
            padding: 10px; font-family: var(--font-code); font-size: 1.1rem;
        }
        input:focus { outline: none; border-color: var(--accent-color); }

        /* Floating Runes */
        .particle {
            position: absolute; color: rgba(255, 255, 255, 0.1); font-size: 20px;
            pointer-events: none; animation: floatUp 10s linear infinite;
        }
        @keyframes floatUp { to { transform: translateY(-100vh) rotate(360deg); } }

    </style>
</head>
<body>

    <div id="hud">
        <div><span class="stat-label">HEADOLOGY:</span> <span id="hp" class="stat">100%</span></div>
        <div style="color:var(--accent-color)">+++ ANTHILL INSIDE +++</div>
        <div><span class="stat-label">THAUMS:</span> <span id="mp" class="stat">50</span></div>
    </div>

    <div id="terminal"></div>

    <div id="controls">
        <div id="quick-actions">
            <button onclick="eng.cmd('north')">N</button>
            <button onclick="eng.cmd('south')">S</button>
            <button onclick="eng.cmd('east')">E</button>
            <button onclick="eng.cmd('west')">W</button>
            <button onclick="eng.cmd('look')">Look</button>
            <button onclick="eng.cmd('poke')">Poke</button>
            <button class="btn-magic" onclick="eng.cmd('cast')">Cast</button>
            <button class="btn-magic" onclick="eng.cmd('cheese')">Cheese</button>
        </div>
        <div id="input-line">
            <input type="text" id="inp" placeholder="+++ Write Command +++">
            <button onclick="eng.submit()">DO IT</button>
        </div>
    </div>

    <script>
        const Game = {
            loc: "hem",
            stats: { hp: 100, mp: 50, cheese: 0 },
            flags: { ants_fed: false },
            
            world: {
                "hem": {
                    name: "High Energy Magic Building",
                    desc: "The air hums with the sound of a million ants thinking very hard. In the center sits HEX, a machine of brass, wood, and glass tubes. The GBL (Great Big Lever) is in the OFF position.",
                    exits: { "north": "library", "east": "uu_garden" },
                    hex: true
                },
                "library": {
                    name: "The Library",
                    desc: "Books chained to shelves snarl as you pass. The L-Space distorts distance here. A bright orange Orangutan is sleeping on a grimoire.",
                    exits: { "south": "hem" },
                    npc: "Librarian"
                },
                "uu_garden": {
                    name: "Unseen University Garden",
                    desc: "The grass is suspiciously green. You suspect magic. The compost heap is smoking ominously.",
                    exits: { "west": "hem", "north": "dungeon" },
                    npc: "Auditor"
                },
                "dungeon": {
                    name: "Dungeon Dimensions",
                    desc: "Reality is thin here. Tentacles flail from geometric shapes.",
                    exits: { "south": "uu_garden" },
                    hostile: "Creature from the Dungeon Dimensions"
                }
            },

            npc: {
                "Librarian": { text: "Oook." },
                "Auditor": { text: "YOU ARE CHAOS. CEASE TO EXIST.", fight: true }
            }
        };

        const Eng = {
            init: function() {
                this.print("+++ OUT OF CHEESE ERROR +++", "hex-output");
                this.print("+++ REBOOTING UNIVERSE... +++", "hex-output");
                setTimeout(() => {
                    this.print("You stand before HEX. The ants are agitated.", "narrator");
                    this.print("Ponder Stibbons yells: 'Don't touch the glass tubes!'", "wizard");
                }, 1000);
                this.bg();
            },

            print: function(txt, cls="narrator") {
                const term = document.getElementById('terminal');
                const d = document.createElement('div');
                d.className = `log-entry ${cls}`;
                d.innerText = txt;
                term.appendChild(d);
                term.scrollTop = term.scrollHeight;
            },

            cmd: function(c) {
                this.print(`> ${c}`, "narrator");
                c = c.toLowerCase();
                const loc = Game.world[Game.loc];

                if(["n","s","e","w","north","south","east","west"].includes(c)) {
                    const dir = c.charAt(0) === 'n' ? 'north' : c.charAt(0) === 's' ? 'south' : c.charAt(0) === 'e' ? 'east' : 'west';
                    if(loc.exits[dir]) {
                        Game.loc = loc.exits[dir];
                        this.look();
                    } else {
                        this.print("You walk into a wall. That's very solid reality.", "danger");
                    }
                }
                else if(c === "look") { this.look(); }
                else if(c === "poke") { 
                    this.print("You poke reality. It wobbles.", "wizard"); 
                    Game.stats.mp -= 1; this.upd();
                }
                else if(c === "cheese") {
                    if(Game.world[Game.loc].hex) {
                        this.print("+++ CHEESE ACCEPTED +++", "hex-output");
                        this.print("+++ ANTS WORKING AT 110% CAPACITY +++", "hex-output");
                        Game.flags.ants_fed = true;
                    } else {
                        this.print("You eat the cheese. It tastes like math.", "narrator");
                    }
                }
                else if(c === "cast") {
                    this.print("You wave your hands. Sparkles happen.", "wizard");
                    if(loc.hostile) {
                        this.print(`The ${loc.hostile} looks confused by your display of headology.`, "hex-output");
                        delete loc.hostile; // Simple victory
                        this.print("Victory through confusion!", "wizard");
                    }
                }
                else {
                    this.print("+++ SYNTAX ERROR. MELON MELON MELON +++", "hex-output");
                }
            },

            look: function() {
                const loc = Game.world[Game.loc];
                this.print(`[ ${loc.name} ]`, "wizard");
                this.print(loc.desc, "narrator");
                if(loc.hex) this.print("HEX looms over you.", "hex-output");
                if(loc.npc) this.print(`There is a ${loc.npc} here.`, "wizard");
                if(loc.hostile) this.print(`A ${loc.hostile} blocks the way!`, "danger");
            },

            submit: function() {
                const i = document.getElementById('inp');
                this.cmd(i.value);
                i.value = "";
                i.focus();
            },

            upd: function() {
                document.getElementById('hp').innerText = Game.stats.hp + "%";
                document.getElementById('mp').innerText = Game.stats.mp;
            },

            bg: function() {
                // Simple runic rain
                setInterval(() => {
                    const r = document.createElement('div');
                    r.className = 'particle';
                    r.innerText = ['âœ¦','âš¡','âœ¨','ðŸœ','ðŸ§€'][Math.floor(Math.random()*5)];
                    r.style.left = Math.random()*100 + 'vw';
                    r.style.top = '100vh';
                    r.style.animationDuration = (Math.random()*5+5) + 's';
                    document.body.appendChild(r);
                    setTimeout(() => r.remove(), 10000);
                }, 500);
            }
        };

        const eng = Eng;
        document.getElementById('inp').addEventListener('keypress', e=>{if(e.key==='Enter') eng.submit()});
        window.onload = () => eng.init();

    </script>
</body>
</html>